{"version":3,"sources":["redux/Phonebook/phonebook-reducer.js","redux/store.js","components/Navigation/Navigation.styled.jsx","components/Navigation/Navigation.jsx","components/UserMenu/UserMenu.styled.jsx","components/UserMenu/UserMenu.jsx","components/AuthNavigation/AuthNavigation.styled.jsx","components/AuthNavigation/AuthNavigation.jsx","components/AppBar/AppBar.jsx","components/PublicRoute.js","components/PrivateRoute.js","App.jsx","index.js","redux/Auth/auth-operation.js","redux/Auth/auth-slice.js","redux/Phonebook/phonebook-operation.js","redux/Phonebook/phonebook-types.js"],"names":["filter","createReducer","types","FILTER","_","action","payload","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","auth","persistReducer","authReducer","phonebookApi","reducerPath","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","concat","devTools","process","persistor","persistStore","HeaderNavigation","styled","header","Navigation","children","activeClassName","exact","to","NavList","ul","NavItem","li","UserMenu","dispatch","useDispatch","componentClass","Link","className","onClick","authOperations","logOut","AuthNavigation","AppBar","isLoggedIn","useSelector","state","PublicRoute","restricted","routeProps","shouldRedirect","PrivateRoute","HomePage","lazy","RegistrationPage","SignInPage","CreateContactsPage","ContactsPage","LogoutPage","App","useEffect","fetchCurrentUser","Container","fallback","type","color","height","width","timeout","path","redirect","ReactDOM","render","StrictMode","loading","document","getElementById","axios","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","credentials","a","post","data","toast","success","Error","error","logIn","thunkAPI","getState","persistedToken","rejectWithValue","get","operations","authSlice","createSlice","name","initialState","user","email","extraReducers","fulfilled","createApi","baseQuery","fetchBaseQuery","baseUrl","prepareHeaders","set","tagTypes","endpoints","builder","getContacts","query","providesTags","addContact","mutation","number","url","method","body","invalidatesTags","deleteContact","id","useGetContactsQuery","useAddContactMutation","useDeleteContactMutation","ADD","DELETE"],"mappings":"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","file":"static/js/main.47586e2f.chunk.js","sourcesContent":["import { createReducer } from '@reduxjs/toolkit';\nimport types from './phonebook-types';\n\nexport const filter = createReducer('', {\n  [types.FILTER]: (_, action) => action.payload,\n});\n","import { configureStore } from '@reduxjs/toolkit';\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport { authReducer } from './Auth';\nimport { phonebookApi } from './Phonebook/phonebook-operation';\nimport { filter } from './Phonebook/phonebook-reducer';\n\nconst authPersistConfig = {\n  key: 'auth',\n  storage,\n  whitelist: ['token'],\n};\n\nexport const store = configureStore({\n  reducer: {\n    auth: persistReducer(authPersistConfig, authReducer),\n    [phonebookApi.reducerPath]: phonebookApi.reducer,\n    filter,\n  },\n  middleware: getDefaultMiddleware =>\n    getDefaultMiddleware({\n      serializableCheck: {\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n      },\n    }).concat(phonebookApi.middleware),\n  devTools: process.env.NODE_ENV === 'development',\n});\n\nexport const persistor = persistStore(store);\n","import styled from '@emotion/styled';\r\n\r\nexport const HeaderNavigation = styled.header`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  background-color: rgba(198, 255, 187, 0.809);\r\n`;","import { NavLink } from 'react-router-dom';\nimport { HeaderNavigation } from './Navigation.styled';\nexport const Navigation = ({ children }) => (\n  <HeaderNavigation>\n    <NavLink activeClassName=\"NavLink--active\" exact to=\"/\">\n      <h1>PhoneBook</h1>\n    </NavLink>\n    {children}\n  </HeaderNavigation>\n);","import styled from '@emotion/styled';\r\n\r\nexport const NavList = styled.ul`\r\n  display: flex;\r\n  padding-top: 10px;\r\n`;\r\n\r\nexport const NavItem = styled.li`\r\n  padding: 10px;\r\n  margin-right: 15px;\r\n   list-style: none;\r\n    font-weight: 700;\r\n  &::after{\r\n     content: '';\r\n     width: 100%;\r\n     height: 2px;\r\n     color: #ee0606\r\n  }\r\n`;","import { NavLink } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { authOperations } from '../../redux/Auth';\nimport { NavItem, NavList } from './UserMenu.styled';\n\nexport const UserMenu = () => {\n  const dispatch = useDispatch();\n\n  return (\n    <NavList>\n      <NavItem componentClass={Link}>\n        <NavLink\n          exact\n          to=\"/contacts\"\n          className=\"NavLink\"\n          activeClassName=\"NavLink--active\"\n        >\n          Contacts\n        </NavLink>\n      </NavItem>\n      <NavItem componentClass={Link}>\n        <NavLink exact to=\"/logout\">\n          <Link to=\"/logout\" onClick={() => dispatch(authOperations.logOut())}>\n            Log out\n          </Link>\n        </NavLink>\n      </NavItem>\n    </NavList>\n  );\n};\n","import styled from '@emotion/styled';\r\n\r\nexport const NavList = styled.ul`\r\ndisplay: flex;\r\n    justify-content: space-evenly;\r\n    padding: 10px 15px;\r\n  min-width: 40%;\r\n  background-color: rgba(211, 255, 211, 0.809);\r\n   list-style: none;\r\n    font-size: 18px;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,\r\n    Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\r\n    text-decoration: none;\r\n    font-weight: 700;\r\n`;\r\n\r\nexport const NavItem = styled.li`\r\n  &::after{\r\n     /* content: ''; */\r\n     width: 90%;\r\n\r\n  }\r\n`;","import { NavLink } from 'react-router-dom';\r\nimport { Link } from 'react-router-dom';\r\nimport { NavItem, NavList } from './AuthNavigation.styled';\r\n\r\nexport const AuthNavigation = () => {\r\n  return (\r\n    <NavList>\r\n      \r\n      <NavItem componentClass={Link}>\r\n        <NavLink\r\n          exact\r\n          to=\"/registration\"\r\n          className=\"NavLink\"\r\n          activeClassName=\"NavLink--active\"\r\n        >\r\n         Registration\r\n        </NavLink>\r\n      </NavItem>\r\n      <NavItem componentClass={Link}>\r\n        <NavLink\r\n          exact\r\n          to=\"/autorization\"\r\n          className=\"NavLink\"\r\n          activeClassName=\"NavLink--active\"\r\n        >\r\n           Sign in          \r\n        </NavLink>\r\n      </NavItem>\r\n    </NavList>\r\n  );\r\n};","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { Navigation } from '../Navigation/Navigation.jsx';\nimport { UserMenu } from '../UserMenu/UserMenu';\nimport { AuthNavigation } from '../AuthNavigation/AuthNavigation';\n\nexport function AppBar() {\n  const isLoggedIn = useSelector(state => state.auth.isLoggedIn);\n  return (\n    <div>\n      <Navigation children={isLoggedIn ? <UserMenu /> : <AuthNavigation />} />\n    </div>\n  );\n}","import { useSelector } from 'react-redux';\nimport { Route, Redirect } from 'react-router';\n\nexport const PublicRoute = ({\n  children,\n  restricted = false,\n  ...routeProps\n}) => {\n  const isLoggedIn = useSelector(state => state.auth.isLoggedIn);\n  const shouldRedirect = isLoggedIn && restricted;\n  return (\n    <Route {...routeProps}>\n      {shouldRedirect ? <Redirect to=\"/contacts\" /> : children}\n    </Route>\n  );\n};\n","import { useSelector } from 'react-redux';\nimport { Route, Redirect } from 'react-router';\nexport const PrivateRoute = ({ children, ...routeProps }) => {\n  const isLoggedIn = useSelector(state => state.auth.isLoggedIn);\n  return (\n    <Route {...routeProps}>\n      {isLoggedIn ? children : <Redirect to=\"/autorization\" />}\n    </Route>\n  );\n};\n","import { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Redirect } from 'react-router';\nimport { Switch } from 'react-router-dom';\nimport { lazy, Suspense } from 'react';\nimport Loader from 'react-loader-spinner';\nimport { authOperations } from './redux/Auth';\nimport { Container } from 'react-bootstrap';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { AppBar } from './components/AppBar/AppBar';\nimport { PublicRoute } from './components/PublicRoute';\nimport { PrivateRoute } from './components/PrivateRoute';\n\nconst HomePage = lazy(() =>\n  import('./Pages/HomePage'),\n);\nconst RegistrationPage = lazy(() =>\n  import('./Pages/RegisterPage'),\n);\nconst SignInPage = lazy(() =>\n  import('./Pages/LoginPage'),\n);\nconst CreateContactsPage = lazy(() =>\n  import('./Pages/AddContactPage'),\n);\nconst ContactsPage = lazy(() =>\n  import('./Pages/PhonebookPage'),\n);\nconst LogoutPage = lazy(() =>\n  import('./Pages/LogOutPage'),\n);\n\nexport default function App() {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(authOperations.fetchCurrentUser());\n  }, [dispatch]);\n  return (\n    <>\n      <Container>\n        <AppBar />\n        <Suspense\n          fallback={\n            <Loader\n              type=\"Hearts\"\n              color=\"#ff8400\"\n              height={75}\n              width={75}\n              timeout={2500}\n            />\n          }\n        >\n          <Switch>\n                <PublicRoute path=\"/\" exact restricted>\n              <HomePage/>\n            </PublicRoute>\n            <PublicRoute exact path=\"/registration\" restricted>\n              <RegistrationPage />\n            </PublicRoute>\n            <PublicRoute exact path=\"/autorization\" restricted>\n              <SignInPage />\n            </PublicRoute>\n            <PrivateRoute path=\"/create-contact\" exact>\n              <CreateContactsPage />\n            </PrivateRoute>\n            <PrivateRoute path=\"/contacts\" redirect exact>\n              <ContactsPage />\n            </PrivateRoute>\n            <PrivateRoute path=\"/logout\" exact>\n              <LogoutPage />\n              <Redirect to=\"/autorization\" />\n            </PrivateRoute>\n          </Switch>\n        </Suspense>\n      </Container>\n      <ToastContainer />\n    </>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { store, persistor } from './redux/store';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","import axios from 'axios';\nimport { createAsyncThunk } from '@reduxjs/toolkit';\nimport { toast } from 'react-toastify';\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\nconst token = {\n  set(token) {\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n  unset() {\n    axios.defaults.headers.common['Authorization'] = '';\n  },\n};\n\nexport const register = createAsyncThunk('auth/register', async credentials => {\n  try {\n    const { data } = await axios.post('/users/signup', credentials);\n    token.set(data.token);\n    toast.success('You have successfully registered!');\n    return data;\n  } catch (error) {\n    throw new Error(\n      toast.error(\n        'Not a success, there was an error during registration. Please try again!',\n      ),\n    );\n  }\n});\nexport const logIn = createAsyncThunk('auth/login', async credentials => {\n  try {\n    const { data } = await axios.post('/users/login', credentials);\n    token.set(data.token);\n    toast.success('You have successfully logged in as your user!');\n    return data;\n  } catch (error) {\n    throw new Error(\n      toast.error(\n        'Unsuccessful, an error occurred while logging in. Please try again!',\n      ),\n    );\n  }\n});\n\nexport const logOut = createAsyncThunk('auth/logout', async () => {\n  try {\n    await axios.post('/users/logout');\n    token.unset();\n    toast.success('You have successfully logged out!');\n  } catch (error) {\n    throw new Error(\n      toast.error('Not a success, you could not log out.Please try again!'),\n    );\n  }\n});\n\nconst fetchCurrentUser = createAsyncThunk(\n  'auth/refresh',\n  async (_, thunkAPI) => {\n    const state = thunkAPI.getState();\n    const persistedToken = state.auth.token;\n\n    if (persistedToken === null) {\n      return thunkAPI.rejectWithValue();\n    }\n\n    token.set(persistedToken);\n    try {\n      const { data } = await axios.get('/users/current');\n      toast.success('Successfully, you are logged in!');\n\n      return data;\n    } catch (error) {\n      throw new Error(\n        toast.error('Unsuccessful, you are not logged in. Please try again!'),\n      );\n    }\n  },\n);\nconst operations = {\n  register,\n  logOut,\n  logIn,\n  fetchCurrentUser,\n};\nexport default operations;\n","import { createSlice } from '@reduxjs/toolkit';\nimport authOperations from './auth-operation';\n\nconst initialState = {\n  user: { name: null, email: null },\n  token: null,\n  isLoggedIn: false,\n};\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  extraReducers: {\n    [authOperations.register.fulfilled](state, action) {\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.isLoggedIn = true;\n    },\n    [authOperations.logIn.fulfilled](state, action) {\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.isLoggedIn = true;\n    },\n    [authOperations.logOut.fulfilled](state, _) {\n      state.user = { name: null, email: null };\n      state.token = null;\n      state.isLoggedIn = false;\n    },\n    [authOperations.fetchCurrentUser.fulfilled](state, action) {\n      state.user = action.payload;\n      state.isLoggedIn = true;\n    },\n  },\n});\n\nexport default authSlice.reducer;\n","import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\nexport const phonebookApi = createApi({\n  reducerPath: 'phonebookApi',\n  baseQuery: fetchBaseQuery({\n    baseUrl: 'https://connections-api.herokuapp.com',\n    prepareHeaders: (headers, { getState }) => {\n      const token = getState().auth.token;\n      if (token) {\n        headers.set('authorization', `Bearer ${token}`);\n      }\n      return headers;\n    },\n  }),\n  tagTypes: ['Phonebook'],\n  endpoints: builder => ({\n    getContacts: builder.query({\n      query: () => '/contacts',\n\n      providesTags: ['Phonebook'],\n    }),\n    addContact: builder.mutation({\n      query: (name, number) => ({\n        url: '/contacts',\n        method: 'POST',\n        body: name,\n        number,\n      }),\n      invalidatesTags: ['Phonebook'],\n    }),\n    deleteContact: builder.mutation({\n      query: id => ({\n        url: `/contacts/${id}`,\n        method: 'DELETE',\n        body: id,\n      }),\n      invalidatesTags: ['Phonebook'],\n    }),\n  }),\n});\n\nexport const {\n  useGetContactsQuery,\n  useAddContactMutation,\n  useDeleteContactMutation,\n} = phonebookApi;\n","/* eslint-disable import/no-anonymous-default-export */\nexport default {\n  ADD: 'phonebook/add',\n  DELETE: 'phonebook/delete',\n  FILTER: 'filter',\n};\n"],"sourceRoot":""}