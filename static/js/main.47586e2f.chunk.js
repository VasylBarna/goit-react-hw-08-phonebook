(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{110:function(e,t,n){"use strict";n.r(t);var r,c,a,o,s,i,u=n(0),l=n.n(u),d=n(25),b=n.n(d),j=(n(54),n(7)),h=n(5),f=n(48),O=n(14),p=n(2),g=n(18),x=n(49),v=n.n(x),y=n(24),m=n(30),k=n(46),w=Object(p.d)("",Object(O.a)({},k.a.FILTER,(function(e,t){return t.payload}))),C={key:"auth",storage:v.a,whitelist:["token"]},L=Object(p.a)({reducer:(r={auth:Object(g.g)(C,y.b)},Object(O.a)(r,m.a.reducerPath,m.a.reducer),Object(O.a)(r,"filter",w),r),middleware:function(e){return e({serializableCheck:{ignoredActions:[g.a,g.f,g.b,g.c,g.d,g.e]}}).concat(m.a.middleware)},devTools:!1}),N=Object(g.h)(L),P=n(3),z=n(51),E=n.n(z),I=n(112),S=n(15),T=(n(103),n(19)),U=n(20),A=U.a.header(c||(c=Object(T.a)(["\n  display: flex;\n  justify-content: space-between;\n  background-color: rgba(198, 255, 187, 0.809);\n"]))),R=n(1),B=function(e){var t=e.children;return Object(R.jsxs)(A,{children:[Object(R.jsx)(j.c,{activeClassName:"NavLink--active",exact:!0,to:"/",children:Object(R.jsx)("h1",{children:"PhoneBook"})}),t]})},D=U.a.ul(a||(a=Object(T.a)(["\n  display: flex;\n  padding-top: 10px;\n"]))),q=U.a.li(o||(o=Object(T.a)(["\n  padding: 10px;\n  margin-right: 15px;\n   list-style: none;\n    font-weight: 700;\n  &::after{\n     content: '';\n     width: 100%;\n     height: 2px;\n     color: #ee0606\n  }\n"]))),F=function(){var e=Object(h.e)();return Object(R.jsxs)(D,{children:[Object(R.jsx)(q,{componentClass:j.b,children:Object(R.jsx)(j.c,{exact:!0,to:"/contacts",className:"NavLink",activeClassName:"NavLink--active",children:"Contacts"})}),Object(R.jsx)(q,{componentClass:j.b,children:Object(R.jsx)(j.c,{exact:!0,to:"/logout",children:Object(R.jsx)(j.b,{to:"/logout",onClick:function(){return e(y.a.logOut())},children:"Log out"})})})]})},M=U.a.ul(s||(s=Object(T.a)(["\ndisplay: flex;\n    justify-content: space-evenly;\n    padding: 10px 15px;\n  min-width: 40%;\n  background-color: rgba(211, 255, 211, 0.809);\n   list-style: none;\n    font-size: 18px;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,\n    Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n    text-decoration: none;\n    font-weight: 700;\n"]))),H=U.a.li(i||(i=Object(T.a)(["\n  &::after{\n     /* content: ''; */\n     width: 90%;\n\n  }\n"]))),Y=function(){return Object(R.jsxs)(M,{children:[Object(R.jsx)(H,{componentClass:j.b,children:Object(R.jsx)(j.c,{exact:!0,to:"/registration",className:"NavLink",activeClassName:"NavLink--active",children:"Registration"})}),Object(R.jsx)(H,{componentClass:j.b,children:Object(R.jsx)(j.c,{exact:!0,to:"/autorization",className:"NavLink",activeClassName:"NavLink--active",children:"Sign in"})})]})};function J(){var e=Object(h.f)((function(e){return e.auth.isLoggedIn}));return Object(R.jsx)("div",{children:Object(R.jsx)(B,{children:e?Object(R.jsx)(F,{}):Object(R.jsx)(Y,{})})})}var Q=n(9),G=n(23),V=["children","restricted"],W=function(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=Object(G.a)(e,V),a=Object(h.f)((function(e){return e.auth.isLoggedIn}))&&r;return Object(R.jsx)(P.b,Object(Q.a)(Object(Q.a)({},c),{},{children:a?Object(R.jsx)(P.a,{to:"/contacts"}):t}))},K=["children"],X=function(e){var t=e.children,n=Object(G.a)(e,K),r=Object(h.f)((function(e){return e.auth.isLoggedIn}));return Object(R.jsx)(P.b,Object(Q.a)(Object(Q.a)({},n),{},{children:r?t:Object(R.jsx)(P.a,{to:"/autorization"})}))},Z=Object(u.lazy)((function(){return n.e(8).then(n.bind(null,126))})),$=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,127))})),_=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,128))})),ee=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,132))})),te=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,131))})),ne=Object(u.lazy)((function(){return n.e(9).then(n.bind(null,129))}));function re(){var e=Object(h.e)();return Object(u.useEffect)((function(){e(y.a.fetchCurrentUser())}),[e]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(I.a,{children:[Object(R.jsx)(J,{}),Object(R.jsx)(u.Suspense,{fallback:Object(R.jsx)(E.a,{type:"Hearts",color:"#ff8400",height:75,width:75,timeout:2500}),children:Object(R.jsxs)(P.d,{children:[Object(R.jsx)(W,{path:"/",exact:!0,restricted:!0,children:Object(R.jsx)(Z,{})}),Object(R.jsx)(W,{exact:!0,path:"/registration",restricted:!0,children:Object(R.jsx)($,{})}),Object(R.jsx)(W,{exact:!0,path:"/autorization",restricted:!0,children:Object(R.jsx)(_,{})}),Object(R.jsx)(X,{path:"/create-contact",exact:!0,children:Object(R.jsx)(ee,{})}),Object(R.jsx)(X,{path:"/contacts",redirect:!0,exact:!0,children:Object(R.jsx)(te,{})}),Object(R.jsxs)(X,{path:"/logout",exact:!0,children:[Object(R.jsx)(ne,{}),Object(R.jsx)(P.a,{to:"/autorization"})]})]})})]}),Object(R.jsx)(S.a,{})]})}b.a.render(Object(R.jsx)(l.a.StrictMode,{children:Object(R.jsx)(h.a,{store:L,children:Object(R.jsx)(f.a,{loading:null,persistor:N,children:Object(R.jsx)(j.a,{children:Object(R.jsx)(re,{})})})})}),document.getElementById("root"))},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return x}));var r=n(17),c=n.n(r),a=n(26),o=n(21),s=n.n(o),i=n(2),u=n(15);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var l,d=function(e){s.a.defaults.headers.common.Authorization="Bearer ".concat(e)},b=function(){s.a.defaults.headers.common.Authorization=""},j=Object(i.c)("auth/register",function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/users/signup",t);case 3:return n=e.sent,r=n.data,d(r.token),u.b.success("You have successfully registered!"),e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),new Error(u.b.error("Not a success, there was an error during registration. Please try again!"));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),h=Object(i.c)("auth/login",function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/users/login",t);case 3:return n=e.sent,r=n.data,d(r.token),u.b.success("You have successfully logged in as your user!"),e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),new Error(u.b.error("Unsuccessful, an error occurred while logging in. Please try again!"));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),f=Object(i.c)("auth/logout",Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.post("/users/logout");case 3:b(),u.b.success("You have successfully logged out!"),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(u.b.error("Not a success, you could not log out.Please try again!"));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),O=Object(i.c)("auth/refresh",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return d(a),e.prev=5,e.next=8,s.a.get("/users/current");case 8:return o=e.sent,i=o.data,u.b.success("Successfully, you are logged in!"),e.abrupt("return",i);case 14:throw e.prev=14,e.t0=e.catch(5),new Error(u.b.error("Unsuccessful, you are not logged in. Please try again!"));case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,n){return e.apply(this,arguments)}}()),p={register:j,logOut:f,logIn:h,fetchCurrentUser:O},g=n(14),x=Object(i.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:(l={},Object(g.a)(l,p.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(g.a)(l,p.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(g.a)(l,p.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(g.a)(l,p.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0})),l)}).reducer},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i}));var r=n(50),c=n(10),a=Object(r.a)({reducerPath:"phonebookApi",baseQuery:Object(c.d)({baseUrl:"https://connections-api.herokuapp.com",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["Phonebook"],endpoints:function(e){return{getContacts:e.query({query:function(){return"/contacts"},providesTags:["Phonebook"]}),addContact:e.mutation({query:function(e,t){return{url:"/contacts",method:"POST",body:e,number:t}},invalidatesTags:["Phonebook"]}),deleteContact:e.mutation({query:function(e){return{url:"/contacts/".concat(e),method:"DELETE",body:e}},invalidatesTags:["Phonebook"]})}}}),o=a.useGetContactsQuery,s=a.useAddContactMutation,i=a.useDeleteContactMutation},46:function(e,t,n){"use strict";t.a={ADD:"phonebook/add",DELETE:"phonebook/delete",FILTER:"filter"}}},[[110,2,3]]]);
//# sourceMappingURL=main.47586e2f.chunk.js.map